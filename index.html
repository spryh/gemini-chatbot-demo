<!DOCTYPE html>
<html>
<head>
    <title>Gemini Chatbot 4</title>
    <style>
        /* (Keep your existing styles) */
    </style>
</head>
<body>
    <!-- (Keep your existing HTML structure) -->
    
    <script>
        const API_KEY = "AIzaSyBbvl5QRipdbaL-zrZayu_-fzEt-TQQSOE"; // Replace with your actual key
        const MODEL_NAME = "gemini-1.5-pro"; // Updated model name
        const API_VERSION = "v1beta"; // Current stable version

        async function sendMessage() {
            const userInput = document.getElementById("userInput").value.trim();
            if (!userInput) return;

            addMessage("You", userInput);
            document.getElementById("userInput").value = "";

            try {
                const loadingId = addMessage("Bot", "Thinking...", true);
                
                // Updated API endpoint
                const response = await fetch(
                    `https://generativelanguage.googleapis.com/${API_VERSION}/models/${MODEL_NAME}:generateContent?key=${API_KEY}`,
                    {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: userInput }]
                            }]
                        })
                    }
                );

                const data = await response.json();
                document.getElementById(loadingId)?.remove();

                if (!data.candidates?.[0]) {
                    throw new Error(
                        data.error?.message || 
                        data.promptFeedback?.blockReason || 
                        "No response from Gemini"
                    );
                }

                const botReply = data.candidates[0].content.parts[0].text;
                addMessage("Bot", botReply);

            } catch (error) {
                addMessage("Error", error.message, false, "error");
                console.error("API Error:", error);
            }
        }

        // (Keep your existing addMessage function and event listeners)
    </script>
</body>
</html>



